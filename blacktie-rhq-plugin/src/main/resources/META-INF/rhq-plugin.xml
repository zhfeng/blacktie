<?xml version="1.0" encoding="UTF-8" ?>

<plugin name="BlacktiePlugin"
        displayName="Blacktie Plugin"
        version="5.0.0.M2-SNAPSHOT"
        package="org.jboss.narayana.blacktie.rhq.plugins.blacktie"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns="urn:xmlns:rhq-plugin"
        xmlns:c="urn:xmlns:rhq-configuration">

   <server name="BlackTie Domain"
           discovery="BlacktiePluginDiscoveryComponent"
           class="DomainComponent"
           description="blacktie domain">
      <operation name="pauseDomain" displayName="pauseDomain" description="pause all servers in the domain">
			  <results>
				  <c:notes>Return message</c:notes>
				  <c:simple-property name="operationResult" type="longString"/>
			  </results>
	  </operation>
	  
	  <operation name="resumeDomain" displayName="resumeDomain" description="resume all servers in the domain">
			  <results>
				  <c:notes>Return message</c:notes>
				  <c:simple-property name="operationResult" type="longString"/>
			  </results>
	  </operation>
	  
	  <operation name="reloadDomain" displayName="reloadDomain" description="reload all servers in the domain">
			  <results>
				  <c:notes>Return message</c:notes>
				  <c:simple-property name="operationResult" type="longString"/>
			  </results>
	  </operation>
	  
	  <operation name="listRunningServers" displayName="listRunningServers" description="Discover running servers">
			  <results>
				  <c:notes>Return message</c:notes>
				  <c:simple-property name="operationResult" type="longString"/>
			  </results>
	  </operation>
	  
	  <operation name="getServersStatus" displayName="getServersStatus" description="Describe the status of the servers in the domain">
			  <results>
				  <c:notes>Return message</c:notes>
				  <c:simple-property name="operationResult" type="longString"/>
			  </results>
	  </operation>

	  <service name="Server"
		  discovery="ServerDiscoveryComponent"
		  class="ServerComponent"
		  description="blacktie server">
		  <operation name="shutdown" displayName="shutdown" description="Shutdown instance for the specified id">
			  <parameters>
				  <c:simple-property required="false" name="id" displayName="id" description="server id"/>
			  </parameters>
			  <results>
				  <c:notes>Shutdown return message</c:notes>
				  <c:simple-property name="operationResult" type="longString"/>
			  </results>
		  </operation>
		  
		  <operation name="getSoftwareVersion" displayName="getSoftwareVersion" description="Get Server version for the specified id">
			  <parameters>
				  <c:simple-property required="true" name="id" displayName="id" description="server id"/>
			  </parameters>
			  <results>
				  <c:notes>Version</c:notes>
				  <c:simple-property name="operationResult" type="longString"/>
			  </results>
		  </operation>
		  
		  <operation name="listRunningInstanceIds" displayName="listRunningInstanceIds" description="Get the list of Ids of currently running servers">
			  <results>
				  <c:notes>Running Ids</c:notes>
				  <c:simple-property name="operationResult" type="longString"/>
			  </results>
		  </operation>

		  <metric property="instanceCount" measurementType="dynamic" displayType="summary" displayName="server instances"
			  defaultOn="true" defaultInterval="60000" dataType="measurement" description="The number of running instances of server"/>
		  <service name="Service"
		  	  discovery="ServiceDiscoveryComponent"
		  	  class="ServiceComponent"
		  	  description="blacktie service">
			  <operation name="advertise" displayName="advertise" description="advertise service">
			  	<results>
				  <c:notes>Services status</c:notes>
				  <c:simple-property name="operationResult" type="longString"/>
			  	</results>
		  	  </operation>

		  	  <operation name="unadvertise" displayName="unadvertise" description="unadvertise service">
			    <results>
				  <c:notes>Services status</c:notes>
				  <c:simple-property name="operationResult" type="longString"/>
			    </results>
		  	  </operation>
		  	
		  	  <operation name="listServiceStatus" displayName="listServiceStatus" description="list services status">
			    <parameters>
				  <c:simple-property required="false" name="id" displayName="id" description="server id"/>
			    </parameters>
			    <results>
				  <c:notes>Services status</c:notes>
				  <c:simple-property name="operationResult" type="longString"/>
			    </results>
		  	 </operation>
		  	 <metric property="serviceLoad" measurementType="dynamic" displayType="summary" displayName="service load"
			  defaultOn="true" defaultInterval="60000" dataType="measurement" description="The load of service"/>
		  	 <metric property="conversational" measurementType="dynamic" displayType="summary" displayName="conversational"
			  defaultOn="true" defaultInterval="60000" dataType="trait" description="identify services is conversational"/>
		  	 <metric property="messageCounter" measurementType="dynamic" displayType="summary" displayName="service message counter"
			  defaultOn="true" defaultInterval="60000" dataType="measurement" description="The number of messages"/>
			 <metric property="errorCounter" measurementType="dynamic" displayType="summary" displayName="service failed message counter"
			  defaultOn="true" defaultInterval="60000" dataType="measurement" description="The number of TPESVCFAILE and TPESVCERR messages"/>
		  	 <metric property="queueDepth" measurementType="dynamic" displayType="summary" displayName="service queue depth"
			  defaultOn="true" defaultInterval="60000" dataType="measurement" description="The depth of queue"/>
		  	 <metric property="minResponseTime" measurementType="dynamic" displayType="summary" displayName="min response time"
			  defaultOn="true" defaultInterval="60000" dataType="measurement" description="the minimum response time for requests serviced" units="milliseconds"/>
		  	 <metric property="avgResponseTime" measurementType="dynamic" displayType="summary" displayName="avg response time"
			  defaultOn="true" defaultInterval="60000" dataType="measurement" description="the average response time for requests serviced" units="milliseconds"/>
		  	 <metric property="maxResponseTime" measurementType="dynamic" displayType="summary" displayName="max response time"
			  defaultOn="true" defaultInterval="60000" dataType="measurement" description="the maximum response time for requests serviced" units="milliseconds"/>
		  	  
		  </service>
	  </service>
   </server>
</plugin>
